class e{static modules=[];constructor(t,n={}){this._cancelCallbacks=e.modules.map(e=>e.bind(this)(t,n))}cancel(){this._cancelCallbacks.forEach(e=>e())}}e.modules.push((function(e,t){const n=[],o=new ResizeObserver(e=>{e.forEach(e=>{for(const t of n)for(let n of t.nodes)if(e.target==n&&0==t.callback(n,e)){c(t);break}})}),c=function(e){const t=n.indexOf(e);t>-1&&(e.mutationMonitor.cancel(),n.splice(t,1),e.nodes.forEach(e=>{n.every(t=>{t.nodes.indexOf(e)})&&o.unobserve(e)}))};return this.resized=function(e,t){const s=[],r=this.added(e,e=>{s.push(e),o.observe(e)});return a={nodes:s,selector:e,callback:t,mutationMonitor:r},n.push(a),{cancel:()=>c(a)};var a},()=>{o.disconnect(),n.splice(0,n.length)}})),e.modules.push((function(e,t){const n=[],o=new MutationObserver(e=>{e.forEach(e=>{for(const t of n)for(let n of t.nodes(e))if(n.matches&&n.matches(t.selector)&&0==t.callback(n,e)){r(t);break}})}),c=e=>{try{return Boolean(e.contentDocument)}catch(e){return console.log(e),!1}},s=s=>(n.push(s),1==n.length&&(t.iframes&&this.added("iframe",e=>((e,t)=>{if(c(e)){var n=e.src||"about:blank",o=e.contentWindow.location.href;if("complete"===e.contentDocument.readyState&&n==o)t(e.contentDocument);else{var s=()=>{c(e)&&t(e.contentDocument),e.removeEventListener("load",s)};e.addEventListener("load",s)}}})(e,e=>o.observe(e,{subtree:!0,childList:!0}))),o.observe(e,{subtree:!0,childList:!0})),{cancel:()=>r(s)}),r=e=>{const t=n.indexOf(e);t>-1&&n.splice(t,1),0==n.length&&o.disconnect()};return this.added=(n,o,{existing:r=!0}={})=>{if(r){const s=[e];if(t.iframes)for(let t of e.querySelectorAll("iframe"))c(t)&&s.push(t.contentDocument);for(let e of s)for(let t of e.querySelectorAll(n))if(!1===o(t,null))return{cancel:()=>{}}}return s({selector:n,callback:o,nodes:e=>e.addedNodes})},this.removed=(e,t)=>s({selector:e,callback:t,nodes:e=>e.removedNodes}),()=>{o.disconnect(),n.splice(0,n.length)}})),e.modules.push((function(e,t){const n=[],o=new IntersectionObserver(e=>{e.forEach(e=>{for(const t of n)for(let n of t.nodes)if(e.target==n&&t.entryTest(e)&&0==t.callback(n,e)){c(t);break}})}),c=function(e){const t=n.indexOf(e);t>-1&&(e.mutationMonitor.cancel(),n.splice(t,1),e.nodes.forEach(e=>{n.every(t=>{t.nodes.indexOf(e)})&&o.unobserve(e)}))},s=function(e,t,s){const r=[],a=this.added(e,e=>{r.push(e),o.observe(e)});return i={nodes:r,selector:e,callback:t,mutationMonitor:a,entryTest:s},n.push(i),{cancel:()=>c(i)};var i};return this.appeared=function(e,t){return s(e,t,e=>e.isIntersecting)},this.disappeared=function(e,t){return s(e,t,e=>!e.isIntersecting)},()=>{o.disconnect(),n.splice(0,n.length)}}));export default(...t)=>new e(...t);
